<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Cleaner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .content {
            padding: 30px;
        }

        .login-form {
            max-width: 500px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .help-text a {
            color: #667eea;
            text-decoration: none;
        }

        .help-text a:hover {
            text-decoration: underline;
        }

        .instruction-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
            font-size: 13px;
            color: #555;
        }

        .instruction-box ol {
            margin-left: 20px;
            margin-top: 10px;
        }

        .instruction-box li {
            margin-bottom: 8px;
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            margin-top: 20px;
        }

        .btn-danger:hover {
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }

        .chat-list {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }

        .chat-item {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }

        .chat-item:hover {
            background: #f8f9fa;
        }

        .chat-item:last-child {
            border-bottom: none;
        }

        .chat-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        .chat-info {
            flex: 1;
        }

        .chat-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .chat-preview {
            font-size: 13px;
            color: #666;
        }

        .chat-meta {
            text-align: right;
            font-size: 12px;
            color: #999;
        }

        .message-item {
            padding: 10px 15px;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            align-items: flex-start;
        }

        .message-checkbox {
            width: 18px;
            height: 18px;
            margin-right: 12px;
            margin-top: 2px;
            cursor: pointer;
        }

        .message-content {
            flex: 1;
            font-size: 13px;
            color: #333;
        }

        .message-date {
            font-size: 11px;
            color: #999;
            margin-top: 5px;
        }

        .selection-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            color: #1976d2;
            font-weight: 600;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .back-btn {
            background: #6c757d;
            width: auto;
            padding: 10px 20px;
            margin-bottom: 15px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Translations
        const translations = {
            en: {
                title: 'Telegram Cleaner',
                subtitle: 'Clean up your Telegram messages easily',
                subtitleMain: 'Manage and clean your Telegram messages',
                chooseLanguage: 'Choose Language',
                phoneNumber: 'Phone Number',
                phoneNumberPlaceholder: '+1234567890',
                phoneNumberHelp: 'Enter your phone number with country code',
                cloudPassword: 'Cloud Password',
                cloudPasswordPlaceholder: 'Your 2FA password (if enabled)',
                cloudPasswordHelp: 'Only required if you have Two-Step Verification enabled',
                apiId: 'API ID',
                apiIdPlaceholder: 'Your API ID',
                apiHash: 'API Hash',
                apiHashPlaceholder: 'Your API Hash',
                apiHashHelp: 'Get your API credentials from',
                howToGetApi: 'How to get API credentials:',
                howToStep1: 'Visit',
                howToStep2: 'Log in with your phone number',
                howToStep3: 'Fill in the application details (any name will work)',
                howToStep4: 'Copy your',
                howToStep5: 'Paste them in the fields above',
                and: 'and',
                loginButton: 'Login to Telegram',
                requiredFields: 'Please fill in all required fields',
                demoMode: 'Demo Mode:',
                demoModeText: 'This is a demonstration with mock data. In a real implementation, this would connect to the Telegram API to manage your actual messages.',
                backToChats: '‚Üê Back to Chats',
                searchChats: 'Search chats...',
                searchMessages: 'Search messages...',
                chatsSelected: 'chat(s) selected',
                messagesSelected: 'message(s) selected',
                noChatsFound: 'No chats found',
                noMessagesFound: 'No messages found',
                messages: 'messages',
                selectAllMessages: 'Select All Messages',
                deleteSelected: 'üóëÔ∏è Delete Selected',
                selectAtLeastOneChat: 'Please select at least one chat',
                deleteChatsConfirm: 'Are you sure you want to delete all messages from',
                cannotUndo: 'chat(s)? This action cannot be undone.',
                successfullyDeleted: 'Successfully deleted messages from',
                selectAtLeastOneMessage: 'Please select at least one message',
                deleteMessagesConfirm: 'Are you sure you want to delete',
                messagesCantUndo: 'message(s)? This action cannot be undone.',
                successfullyDeletedMessages: 'Successfully deleted',
            },
            ru: {
                title: 'Telegram –û—á–∏—Å—Ç–∏—Ç–µ–ª—å',
                subtitle: '–õ–µ–≥–∫–æ –æ—á–∏—â–∞–π—Ç–µ –≤–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram',
                subtitleMain: '–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∏ –æ—á–∏—â–∞–π—Ç–µ –≤–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram',
                chooseLanguage: '–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫',
                phoneNumber: '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
                phoneNumberPlaceholder: '+79001234567',
                phoneNumberHelp: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã',
                cloudPassword: '–û–±–ª–∞—á–Ω—ã–π –ø–∞—Ä–æ–ª—å',
                cloudPasswordPlaceholder: '–í–∞—à –ø–∞—Ä–æ–ª—å 2FA (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)',
                cloudPasswordHelp: '–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è',
                apiId: 'API ID',
                apiIdPlaceholder: '–í–∞—à API ID',
                apiHash: 'API Hash',
                apiHashPlaceholder: '–í–∞—à API Hash',
                apiHashHelp: '–ü–æ–ª—É—á–∏—Ç–µ API —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞',
                howToGetApi: '–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:',
                howToStep1: '–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞',
                howToStep2: '–í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
                howToStep3: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ª—é–±–æ–µ –∏–º—è –ø–æ–¥–æ–π–¥—ë—Ç)',
                howToStep4: '–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à',
                howToStep5: '–í—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –≤ –ø–æ–ª—è –≤—ã—à–µ',
                and: '–∏',
                loginButton: '–í–æ–π—Ç–∏ –≤ Telegram',
                requiredFields: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è',
                demoMode: '–î–µ–º–æ-—Ä–µ–∂–∏–º:',
                demoModeText: '–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–∏–ª–æ—Å—å –±—ã –∫ API Telegram –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.',
                backToChats: '‚Üê –ù–∞–∑–∞–¥ –∫ —á–∞—Ç–∞–º',
                searchChats: '–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤...',
                searchMessages: '–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π...',
                chatsSelected: '—á–∞—Ç(–æ–≤) –≤—ã–±—Ä–∞–Ω–æ',
                messagesSelected: '—Å–æ–æ–±—â–µ–Ω–∏–π –≤—ã–±—Ä–∞–Ω–æ',
                noChatsFound: '–ß–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',
                noMessagesFound: '–°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',
                messages: '—Å–æ–æ–±—â–µ–Ω–∏–π',
                selectAllMessages: '–í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                deleteSelected: 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ',
                selectAtLeastOneChat: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —á–∞—Ç',
                deleteChatsConfirm: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑',
                cannotUndo: '—á–∞—Ç(–æ–≤)? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.',
                successfullyDeleted: '–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑',
                selectAtLeastOneMessage: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                deleteMessagesConfirm: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å',
                messagesCantUndo: '—Å–æ–æ–±—â–µ–Ω–∏–π? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.',
                successfullyDeletedMessages: '–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ',
            }
        };

        function App() {
            const [language, setLanguage] = useState('en');
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [phoneNumber, setPhoneNumber] = useState('');
            const [cloudPassword, setCloudPassword] = useState('');
            const [apiId, setApiId] = useState('');
            const [apiHash, setApiHash] = useState('');
            const [chats, setChats] = useState([]);
            const [selectedChats, setSelectedChats] = useState(new Set());
            const [selectedMessages, setSelectedMessages] = useState(new Set());
            const [searchQuery, setSearchQuery] = useState('');
            const [viewMode, setViewMode] = useState('chats'); // 'chats' or 'messages'
            const [currentChat, setCurrentChat] = useState(null);

            const t = translations[language];

            // Mock login function
            const handleLogin = (e) => {
                e.preventDefault();

                if (!phoneNumber || !apiId || !apiHash) {
                    alert(t.requiredFields);
                    return;
                }

                // Simulate login and load mock data
                setTimeout(() => {
                    setIsLoggedIn(true);
                    loadMockChats();
                }, 1000);
            };

            // Load mock chat data
            const loadMockChats = () => {
                const mockChats = [
                    {
                        id: 1,
                        name: 'John Doe',
                        type: 'private',
                        lastMessage: 'Hey, how are you doing?',
                        messageCount: 245,
                        messages: [
                            { id: 101, text: 'Hey, how are you doing?', date: '2026-01-18 10:30' },
                            { id: 102, text: 'Are we meeting tomorrow?', date: '2026-01-17 15:20' },
                            { id: 103, text: 'I sent you the documents', date: '2026-01-16 09:15' },
                        ]
                    },
                    {
                        id: 2,
                        name: 'Tech News Group',
                        type: 'group',
                        lastMessage: 'Check out this new AI tool!',
                        messageCount: 1523,
                        messages: [
                            { id: 201, text: 'Check out this new AI tool!', date: '2026-01-18 11:45' },
                            { id: 202, text: 'Anyone going to the conference?', date: '2026-01-18 08:30' },
                            { id: 203, text: 'Great article about machine learning', date: '2026-01-17 20:10' },
                        ]
                    },
                    {
                        id: 3,
                        name: 'Family Chat',
                        type: 'group',
                        lastMessage: 'Dinner at 7 PM tonight!',
                        messageCount: 892,
                        messages: [
                            { id: 301, text: 'Dinner at 7 PM tonight!', date: '2026-01-18 12:00' },
                            { id: 302, text: 'Can someone pick up groceries?', date: '2026-01-17 16:45' },
                            { id: 303, text: 'Happy birthday mom! üéâ', date: '2026-01-15 09:00' },
                        ]
                    },
                    {
                        id: 4,
                        name: 'Work Projects',
                        type: 'group',
                        lastMessage: 'Meeting rescheduled to 3 PM',
                        messageCount: 2341,
                        messages: [
                            { id: 401, text: 'Meeting rescheduled to 3 PM', date: '2026-01-18 13:15' },
                            { id: 402, text: 'Project deadline extended', date: '2026-01-17 14:30' },
                            { id: 403, text: 'Please review the proposal', date: '2026-01-16 11:20' },
                        ]
                    },
                    {
                        id: 5,
                        name: 'Sarah Wilson',
                        type: 'private',
                        lastMessage: 'Thanks for your help!',
                        messageCount: 156,
                        messages: [
                            { id: 501, text: 'Thanks for your help!', date: '2026-01-18 14:20' },
                            { id: 502, text: 'Can you send me the files?', date: '2026-01-17 10:15' },
                            { id: 503, text: 'See you tomorrow', date: '2026-01-16 18:45' },
                        ]
                    }
                ];
                setChats(mockChats);
            };

            // Toggle chat selection
            const toggleChatSelection = (chatId) => {
                const newSelected = new Set(selectedChats);
                if (newSelected.has(chatId)) {
                    newSelected.delete(chatId);
                } else {
                    newSelected.add(chatId);
                }
                setSelectedChats(newSelected);
            };

            // Toggle message selection
            const toggleMessageSelection = (messageId) => {
                const newSelected = new Set(selectedMessages);
                if (newSelected.has(messageId)) {
                    newSelected.delete(messageId);
                } else {
                    newSelected.add(messageId);
                }
                setSelectedMessages(newSelected);
            };

            // View messages in a chat
            const viewChatMessages = (chat) => {
                setCurrentChat(chat);
                setViewMode('messages');
                setSelectedMessages(new Set());
            };

            // Select all messages in current chat
            const selectAllMessages = () => {
                if (currentChat) {
                    const allMessageIds = new Set(currentChat.messages.map(m => m.id));
                    setSelectedMessages(allMessageIds);
                }
            };

            // Filter chats/messages based on search
            const filteredChats = chats.filter(chat => 
                chat.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                chat.lastMessage.toLowerCase().includes(searchQuery.toLowerCase())
            );

            const filteredMessages = currentChat ? 
                currentChat.messages.filter(msg => 
                    msg.text.toLowerCase().includes(searchQuery.toLowerCase())
                ) : [];

            // Delete selected items
            const handleDelete = () => {
                if (viewMode === 'chats') {
                    if (selectedChats.size === 0) {
                        alert(t.selectAtLeastOneChat);
                        return;
                    }

                    const confirmed = window.confirm(
                        `${t.deleteChatsConfirm} ${selectedChats.size} ${t.cannotUndo}`
                    );

                    if (confirmed) {
                        // In a real app, this would call the Telegram API
                        alert(`${t.successfullyDeleted} ${selectedChats.size} ${t.chatsSelected}`);
                        setSelectedChats(new Set());
                    }
                } else {
                    if (selectedMessages.size === 0) {
                        alert(t.selectAtLeastOneMessage);
                        return;
                    }

                    const confirmed = window.confirm(
                        `${t.deleteMessagesConfirm} ${selectedMessages.size} ${t.messagesCantUndo}`
                    );

                    if (confirmed) {
                        // In a real app, this would call the Telegram API
                        alert(`${t.successfullyDeletedMessages} ${selectedMessages.size} ${t.messagesSelected}`);
                        setSelectedMessages(new Set());
                    }
                }
            };

            if (!isLoggedIn) {
                return (
                    <div className="container">
                        <div className="header">
                            <h1>üßπ {t.title}</h1>
                            <p>{t.subtitle}</p>
                        </div>
                        <div className="content">
                            <div style={{textAlign: 'center', marginBottom: '20px'}}>
                                <button
                                    className="btn"
                                    style={{
                                        width: 'auto',
                                        padding: '10px 20px',
                                        fontSize: '14px',
                                        background: language === 'en' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'
                                    }}
                                    onClick={() => setLanguage(language === 'en' ? 'ru' : 'en')}
                                >
                                    {language === 'en' ? 'üá∑üá∫ –†—É—Å—Å–∫–∏–π' : 'üá∫üá∏ English'}
                                </button>
                            </div>
                            <form className="login-form" onSubmit={handleLogin}>
                                <div className="form-group">
                                    <label>{t.phoneNumber} *</label>
                                    <input
                                        type="tel"
                                        placeholder={t.phoneNumberPlaceholder}
                                        value={phoneNumber}
                                        onChange={(e) => setPhoneNumber(e.target.value)}
                                        required
                                    />
                                    <p className="help-text">{t.phoneNumberHelp}</p>
                                </div>

                                <div className="form-group">
                                    <label>{t.cloudPassword}</label>
                                    <input
                                        type="password"
                                        placeholder={t.cloudPasswordPlaceholder}
                                        value={cloudPassword}
                                        onChange={(e) => setCloudPassword(e.target.value)}
                                    />
                                    <p className="help-text">{t.cloudPasswordHelp}</p>
                                </div>

                                <div className="form-group">
                                    <label>{t.apiId} *</label>
                                    <input
                                        type="text"
                                        placeholder={t.apiIdPlaceholder}
                                        value={apiId}
                                        onChange={(e) => setApiId(e.target.value)}
                                        required
                                    />
                                </div>

                                <div className="form-group">
                                    <label>{t.apiHash} *</label>
                                    <input
                                        type="text"
                                        placeholder={t.apiHashPlaceholder}
                                        value={apiHash}
                                        onChange={(e) => setApiHash(e.target.value)}
                                        required
                                    />
                                    <p className="help-text">
                                        {t.apiHashHelp}{' '}
                                        <a href="https://my.telegram.org/apps" target="_blank" rel="noopener noreferrer">
                                            my.telegram.org/apps
                                        </a>
                                    </p>

                                    <div className="instruction-box">
                                        <strong>{t.howToGetApi}</strong>
                                        <ol>
                                            <li>{t.howToStep1} <a href="https://my.telegram.org/apps" target="_blank">my.telegram.org/apps</a></li>
                                            <li>{t.howToStep2}</li>
                                            <li>{t.howToStep3}</li>
                                            <li>{t.howToStep4} <strong>api_id</strong> {t.and} <strong>api_hash</strong></li>
                                            <li>{t.howToStep5}</li>
                                        </ol>
                                    </div>
                                </div>

                                <button type="submit" className="btn">
                                    {t.loginButton}
                                </button>
                            </form>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>üßπ {t.title}</h1>
                        <p>{t.subtitleMain}</p>
                        <div style={{marginTop: '10px'}}>
                            <button
                                style={{
                                    padding: '8px 16px',
                                    fontSize: '12px',
                                    background: 'rgba(255, 255, 255, 0.2)',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    transition: 'background 0.2s'
                                }}
                                onClick={() => setLanguage(language === 'en' ? 'ru' : 'en')}
                                onMouseOver={(e) => e.target.style.background = 'rgba(255, 255, 255, 0.3)'}
                                onMouseOut={(e) => e.target.style.background = 'rgba(255, 255, 255, 0.2)'}
                            >
                                {language === 'en' ? 'üá∑üá∫ –†—É—Å—Å–∫–∏–π' : 'üá∫üá∏ English'}
                            </button>
                        </div>
                    </div>
                    <div className="content">
                        <div className="alert alert-info">
                            <strong>{t.demoMode}</strong> {t.demoModeText}
                        </div>

                        {viewMode === 'messages' && (
                            <button className="btn back-btn" onClick={() => setViewMode('chats')}>
                                {t.backToChats}
                            </button>
                        )}

                        <div className="search-box">
                            <input
                                type="text"
                                placeholder={viewMode === 'chats' ? t.searchChats : t.searchMessages}
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                            />
                        </div>

                        {viewMode === 'chats' ? (
                            <>
                                {selectedChats.size > 0 && (
                                    <div className="selection-info">
                                        {selectedChats.size} {t.chatsSelected}
                                    </div>
                                )}

                                <div className="chat-list">
                                    {filteredChats.length === 0 ? (
                                        <div className="empty-state">
                                            <p>{t.noChatsFound}</p>
                                        </div>
                                    ) : (
                                        filteredChats.map(chat => (
                                            <div key={chat.id} className="chat-item">
                                                <input
                                                    type="checkbox"
                                                    className="chat-checkbox"
                                                    checked={selectedChats.has(chat.id)}
                                                    onChange={() => toggleChatSelection(chat.id)}
                                                />
                                                <div className="chat-info" onClick={() => viewChatMessages(chat)} style={{cursor: 'pointer'}}>
                                                    <div className="chat-name">
                                                        {chat.name}
                                                        {chat.type === 'group' && ' üë•'}
                                                    </div>
                                                    <div className="chat-preview">{chat.lastMessage}</div>
                                                </div>
                                                <div className="chat-meta">
                                                    {chat.messageCount} {t.messages}
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </>
                        ) : (
                            <>
                                {currentChat && (
                                    <>
                                        <div style={{marginBottom: '15px'}}>
                                            <h3 style={{color: '#333', marginBottom: '10px'}}>
                                                {currentChat.name}
                                            </h3>
                                            <button
                                                className="btn"
                                                style={{width: 'auto', padding: '8px 16px', fontSize: '14px'}}
                                                onClick={selectAllMessages}
                                            >
                                                {t.selectAllMessages}
                                            </button>
                                        </div>

                                        {selectedMessages.size > 0 && (
                                            <div className="selection-info">
                                                {selectedMessages.size} {t.messagesSelected}
                                            </div>
                                        )}

                                        <div className="chat-list">
                                            {filteredMessages.length === 0 ? (
                                                <div className="empty-state">
                                                    <p>{t.noMessagesFound}</p>
                                                </div>
                                            ) : (
                                                filteredMessages.map(message => (
                                                    <div key={message.id} className="message-item">
                                                        <input
                                                            type="checkbox"
                                                            className="message-checkbox"
                                                            checked={selectedMessages.has(message.id)}
                                                            onChange={() => toggleMessageSelection(message.id)}
                                                        />
                                                        <div className="message-content">
                                                            {message.text}
                                                            <div className="message-date">{message.date}</div>
                                                        </div>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    </>
                                )}
                            </>
                        )}

                        <button className="btn btn-danger" onClick={handleDelete}>
                            {t.deleteSelected}
                        </button>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
